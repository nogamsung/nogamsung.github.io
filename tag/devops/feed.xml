<?xml version="1.0" encoding="utf-8"?>

<feed xmlns="http://www.w3.org/2005/Atom" >
  <generator uri="https://jekyllrb.com/" version="3.9.0">Jekyll</generator>
  <link href="/tag/devops/feed.xml" rel="self" type="application/atom+xml" />
  <link href="/" rel="alternate" type="text/html" />
  <updated>2023-03-24T17:19:37+09:00</updated>
  <id>/tag/devops/feed.xml</id>

  
  
  

  
    <title type="html">nogamsung | </title>
  

  
    <subtitle>Computer Science &amp; Engineering</subtitle>
  

  

  
    
      
    
  

  
  

  
    <entry>
      <title type="html">AWS_Code_Deploy - Setting Up AWS Code Deploy</title>
      <link href="/AWS_Code_Deploy-Setting_Up_AWS_Code_Deploy" rel="alternate" type="text/html" title="AWS_Code_Deploy - Setting Up AWS Code Deploy" />
      <published>2023-03-20T17:00:00+09:00</published>
      <updated>2023-03-20T17:00:00+09:00</updated>
      <id>/AWS_Code_Deploy-Setting_Up_AWS_Code_Deploy-</id>
      <content type="html" xml:base="/AWS_Code_Deploy-Setting_Up_AWS_Code_Deploy">&lt;h2 id=&quot;aws-code-deploy&quot;&gt;AWS Code Deploy&lt;/h2&gt;
&lt;p&gt;AWS Code Deploy is a CICD pipeline tool that you can use to create a pipeline to AWS EC2 or other AWS computing 
instances.&lt;/p&gt;

&lt;h3 id=&quot;why-choose-aws-code-deploy-when-there-are-other-choices-for-cicd-pipeline&quot;&gt;Why choose AWS Code Deploy when there are other choices for CICD pipeline?&lt;/h3&gt;
&lt;p&gt;A pipeline that I used to use was by using Docker, GitHub Actions, and Watchtower. The problem with this is that
it uses docker which could consume a lot of memory, leading to failure of a server. However, by using AWS Code Deploy,
you can construct a pipeline so that it runs on the operating system such as Ubuntu right on it.&lt;/p&gt;

&lt;h2 id=&quot;the-infra-architecture&quot;&gt;The infra-architecture&lt;/h2&gt;
&lt;p&gt;The infra-architecture that I will be constructing looks like this.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;step-0Ô∏è‚É£&quot;&gt;Step 0Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;You need to have an active EC2 instance setup.&lt;/p&gt;

&lt;h3 id=&quot;step-1Ô∏è‚É£&quot;&gt;Step 1Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Create a S3 bucket using the below options.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/2.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/3.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/4.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;step-2Ô∏è‚É£&quot;&gt;Step 2Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Configure S3 IAM user.&lt;/p&gt;

&lt;h4 id=&quot;step-2Ô∏è‚É£---1Ô∏è‚É£&quot;&gt;Step 2Ô∏è‚É£ - 1Ô∏è‚É£&lt;/h4&gt;
&lt;p&gt;Create S3 IAM user using the below options.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/5.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/6.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/7.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;step-2Ô∏è‚É£---2Ô∏è‚É£&quot;&gt;Step 2Ô∏è‚É£ - 2Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Create an access key and make sure you download the file somewhere safe.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/8.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;step-3Ô∏è‚É£&quot;&gt;Step 3Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Configure EC2 IAM role.&lt;/p&gt;

&lt;h4 id=&quot;step-3Ô∏è‚É£---1Ô∏è‚É£&quot;&gt;Step 3Ô∏è‚É£ - 1Ô∏è‚É£&lt;/h4&gt;
&lt;p&gt;Create IAM role.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/9.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/10.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;step-3Ô∏è‚É£---2Ô∏è‚É£&quot;&gt;Step 3Ô∏è‚É£ - 2Ô∏è‚É£&lt;/h4&gt;
&lt;p&gt;Modify EC2 IAM role and give the created IAM role to EC2.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/11.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/12.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;step-4Ô∏è‚É£&quot;&gt;Step 4Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Create CodeDeploy IAM role.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/13.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/14.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/15.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;step-5Ô∏è‚É£&quot;&gt;Step 5Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Create Code Deploy application and deployment group.&lt;/p&gt;

&lt;h3 id=&quot;step-5Ô∏è‚É£-1&quot;&gt;Step 5Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Create Code Deploy application and deployment group.&lt;/p&gt;

&lt;h4 id=&quot;step-5Ô∏è‚É£---1Ô∏è‚É£&quot;&gt;Step 5Ô∏è‚É£ - 1Ô∏è‚É£&lt;/h4&gt;
&lt;p&gt;Create application.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/16.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/17.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;step-5Ô∏è‚É£---2Ô∏è‚É£&quot;&gt;Step 5Ô∏è‚É£ - 2Ô∏è‚É£&lt;/h4&gt;
&lt;p&gt;Create deployment group.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/18.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/19.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/20.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/screenshots/2023/03/20/21.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;step-6Ô∏è‚É£&quot;&gt;Step 6Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Install and download the following to EC2.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# Download AWS Corretto&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;wget https://corretto.aws/downloads/latest/amazon-corretto-11-x64-linux-jdk.rpm &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; java11.rpm

&lt;span class=&quot;c&quot;&gt;# Install Java 11 JDK&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;openjdk-11-jdk

&lt;span class=&quot;c&quot;&gt;# Verify Java version&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;java &lt;span class=&quot;nt&quot;&gt;--version&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Install Ruby&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;ruby-full

&lt;span class=&quot;c&quot;&gt;# Download Seoul region resource kit file for AWS Code Deploy&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;wget https://aws-codedeploy-ap-northeast-2.s3.ap-northeast-2.amazonaws.com/latest/install

&lt;span class=&quot;c&quot;&gt;# Grant execute&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;chmod&lt;/span&gt; +x ./install

&lt;span class=&quot;c&quot;&gt;# Install agent&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; ./install auto

&lt;span class=&quot;c&quot;&gt;# Verify agent status&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;service codedeploy-agent status
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;step-7Ô∏è‚É£&quot;&gt;Step 7Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Add repository secrets to your GitHub repository.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;secrets.PROJECT_NAME&lt;/code&gt;: Name of your project&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;secrets.CICD_BUCKET&lt;/code&gt;: Name of your cicd bucket&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;secrets.CODE_DEPLOY_APP_NAME&lt;/code&gt;: Name of your CodeDeploy application&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;secrets.DEPLOYMENT_GROUP_NAME&lt;/code&gt;: name of your CodeDeploy deployment group&lt;/p&gt;

&lt;h3 id=&quot;step-8Ô∏è‚É£&quot;&gt;Step 8Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Create &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.yaml&lt;/code&gt; for GitHub Actions flow to your repository &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.github/workflows/&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;CICD using AWS CodeDeploy&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;master&quot;&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;PROJECT_NAME&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;$&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;BUCKET_NAME&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;$&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;CODE_DEPLOY_APP_NAME&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;$&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;DEPLOYMENT_GROUP_NAME&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;$&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ubuntu-latest&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Checkout&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;actions/checkout@v3&lt;/span&gt;

      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Setup Java JDK &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;11&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;actions/setup-java@v3&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;distribution&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;adopt&apos;&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;java-version&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;11&apos;&lt;/span&gt;

      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Grant execute permission for gradlew and deploy.sh&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;chmod +x gradlew scripts/deploy.sh&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;shell&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;bash&lt;/span&gt;

      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Build with Gradle&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;./gradlew build&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;shell&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;bash&lt;/span&gt;

      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Make ZIP File&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;zip -qq -r ./$GITHUB_SHA.zip .&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;shell&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;bash&lt;/span&gt;

      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Configure AWS credentials&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;aws-actions/configure-aws-credentials@v1&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;aws-access-key-id&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;$&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;aws-secret-access-key&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;$&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;aws-region&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;$&lt;/span&gt;

      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Upload to S3&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;aws s3 cp --region ap-northeast-2 ./$GITHUB_SHA.zip s3://$BUCKET_NAME/$PROJECT_NAME/$GITHUB_SHA.zip&lt;/span&gt;

      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Code Deploy&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;aws deploy create-deployment --application-name $CODE_DEPLOY_APP_NAME --deployment-config-name CodeDeployDefault.OneAtATime --deployment-group-name $DEPLOYMENT_GROUP_NAME --s3-location bucket=$BUCKET_NAME,bundleType=zip,key=$PROJECT_NAME/$GITHUB_SHA.zip&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;step-9Ô∏è‚É£&quot;&gt;Step 9Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Create &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;appspec.yml&lt;/code&gt; to your repository‚Äôs root path.&lt;/p&gt;

&lt;div class=&quot;language-yml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.0&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;linux&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;files&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;destination&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/home/ubuntu/project&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;permissions&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/home/ubuntu/project/&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;owner&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ubuntu&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ubuntu&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;hooks&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;AfterInstall&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;scripts/deploy.sh&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;60&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;runas&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ubuntu&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;step-1Ô∏è‚É£0Ô∏è‚É£&quot;&gt;Step 1Ô∏è‚É£0Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Create &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;deploy.sh&lt;/code&gt; to this path &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scripts/&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/usr/bin/env bash&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;REPOSITORY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/home/ubuntu/project
&lt;span class=&quot;nv&quot;&gt;APPLICATION_YML&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/home/ubuntu/application.yml
&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$REPOSITORY&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;project
&lt;span class=&quot;nv&quot;&gt;JAR_NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$REPOSITORY&lt;/span&gt;/build/libs/ | &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;app.jar&apos;&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;tail&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; 1&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;JAR_PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$REPOSITORY&lt;/span&gt;/build/libs/&lt;span class=&quot;nv&quot;&gt;$JAR_NAME&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;CURRENT_PID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;pgrep &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$APP_NAME&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-z&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$CURRENT_PID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;then
  &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&amp;gt; &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$APP_NAME&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; process does not exist&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else
  &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&amp;gt; kill -9 &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$CURRENT_PID&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;kill&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-15&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$CURRENT_PID&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;sleep &lt;/span&gt;5
&lt;span class=&quot;k&quot;&gt;fi

&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&amp;gt; &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$JAR_PATH&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; Deployed&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;nohup &lt;/span&gt;java &lt;span class=&quot;nt&quot;&gt;-jar&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$JAR_PATH&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--spring&lt;/span&gt;.conf.location&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$APPLICATION_YML&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--server&lt;/span&gt;.port&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;8080 &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; /dev/null 2&amp;gt; /dev/null &amp;lt; /dev/null &amp;amp;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h4 id=&quot;caution-Ô∏è&quot;&gt;Caution ‚ùóÔ∏è&lt;/h4&gt;
&lt;p&gt;Make sure you have your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;application.yml&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;application.properties&lt;/code&gt; in EC2 if you have any environment variables.&lt;/p&gt;

&lt;h3 id=&quot;step-1Ô∏è‚É£1Ô∏è‚É£&quot;&gt;Step 1Ô∏è‚É£1Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Finally, push to GitHub!&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;Reference&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=UF2Giz9PE-E&amp;amp;t=464s&quot; target=&quot;_blank&quot;&gt;BEÎ°úÎßà in YouTube&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content>

      
      
      
      
      

      <author>
          <name>nogamsung</name>
        
        
      </author>

      

      
        <category term="devops" />
      

      
        <summary type="html">AWS Code Deploy AWS Code Deploy is a CICD pipeline tool that you can use to create a pipeline to AWS EC2 or other AWS computing instances.</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">GitHub Actions - CI Pipeline for Spring Boot</title>
      <link href="/GitHub_Actions-CI_Pipeline_for_Spring_Boot" rel="alternate" type="text/html" title="GitHub Actions - CI Pipeline for Spring Boot" />
      <published>2022-08-24T14:00:00+09:00</published>
      <updated>2022-08-24T14:00:00+09:00</updated>
      <id>/GitHub_Actions-CI_Pipeline_for_Spring_Boot</id>
      <content type="html" xml:base="/GitHub_Actions-CI_Pipeline_for_Spring_Boot">&lt;h2 id=&quot;what-is-github-actions&quot;&gt;What is GitHub Actions&lt;/h2&gt;
&lt;p&gt;GitHub Actions allows developers to automate various tasks. For example, we can build CI pipelines for Spring Boot 
project. In this post, I am going to go through the steps to build CI pipeline for Spring Boot.&lt;/p&gt;

&lt;h3 id=&quot;1Ô∏è‚É£-setting-in-github&quot;&gt;1Ô∏è‚É£ Setting in GitHub&lt;/h3&gt;
&lt;p&gt;First go to your project repository and click on &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Actions&lt;/code&gt; in the menu.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;assets/screenshots/2022/08/31/screenshot-6.png&quot; alt=&quot;screenshot-6&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;2Ô∏è‚É£-set-up-a-workflow&quot;&gt;2Ô∏è‚É£ Set up a workflow&lt;/h3&gt;

&lt;p&gt;If you want to start from scratch, click on &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;set up a workflow yourself -&amp;gt;&lt;/code&gt;, otherwise, click on the specific
configuration you need.&lt;/p&gt;

&lt;p&gt;I am going to set up from the scratch for the example.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;assets/screenshots/2022/08/31/screenshot-7.png&quot; alt=&quot;screenshot-7&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;3Ô∏è‚É£-workflow-code&quot;&gt;3Ô∏è‚É£ Workflow Code&lt;/h3&gt;

&lt;p&gt;For the sake of the example, I am going to use IntelliJ IDEA. To do this, you just need to add the workflow file. In the
root of your project folder, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/.github/workflows/develop-ci.yaml&lt;/code&gt;. I have named the file &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;develop-ci.yaml&lt;/code&gt; because I am 
going to build a CI(Continuous Integration) pipeline, but you can name it whatever you want. Nevertheless, the file has 
to be in this specific path: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/.github/workflows/&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;The whole workflow code is going to look like this&lt;/p&gt;
&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Develop - CI&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;develop&quot;&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;pull_request&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;develop&quot;&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ubuntu-latest&lt;/span&gt;

    &lt;span class=&quot;na&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;actions/checkout@v3&lt;/span&gt;

      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set up JDK&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;actions/setup-java@v3&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;distribution&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;adopt&apos;&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;java-version&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;11&apos;&lt;/span&gt;

      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Grant execute permission for Gradlew&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;chmod +x gradlew&lt;/span&gt;

      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Build with Gradle&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;./gradlew build -x test&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;DB_NAME&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;${ { secrets.DB_NAME } }&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;DB_PORT&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;${ { secrets.DB_PORT } }&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;DB_HOST&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;${ { secrets.DB_HOST } }&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;DB_USERNAME&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;${ { secrets.DB_USERNAME } }&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;DB_PASSWORD&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;${ { secrets.DB_PASSWORD } }&lt;/span&gt;

      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Build and push Docker image&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;mr-smithers-excellent/docker-build-push@v5&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;gs97ahn/server&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;tags&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;example-latest&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;registry&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;docker.io&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;${ { secrets.DOCKER_USERNAME } }&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;${ { secrets.DOCKER_PASSWORD } }&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;important-Ô∏è&quot;&gt;Important ‚ùóÔ∏è&lt;/h4&gt;
&lt;p&gt;In the example above, I have spacing between the curly brace. However, it should be not have spacing.&lt;/p&gt;

&lt;h4 id=&quot;workflow-code-explanation&quot;&gt;Workflow Code Explanation&lt;/h4&gt;
&lt;p&gt;This workflow will run everytime a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;push&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pull request&lt;/code&gt; is triggered in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;develop&lt;/code&gt; branch. It will do specific tasks
given in the ubuntu-latest environment. Theses are the specific steps that it will go through:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Set up JDK&lt;/li&gt;
  &lt;li&gt;Grant execute permission for Gradlew&lt;/li&gt;
  &lt;li&gt;Build with Gradle&lt;/li&gt;
  &lt;li&gt;Build and push Docker image&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Basically, it will set up jdk and test the code with the test codes that you have. Afterwards, it will build it to your
docker repository.&lt;/p&gt;

&lt;h3 id=&quot;4Ô∏è‚É£-setting-up-secrets&quot;&gt;4Ô∏è‚É£ Setting up Secrets&lt;/h3&gt;
&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;${ { secrets } }&lt;/code&gt; in the code is the environment variable that you give when you compile and run the program. The
reason for being secret is because there are certain variables that you would want it to be secrets like the example
below:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;port number&lt;/li&gt;
  &lt;li&gt;docker repository username&lt;/li&gt;
  &lt;li&gt;docker repository password&lt;/li&gt;
  &lt;li&gt;database username&lt;/li&gt;
  &lt;li&gt;database passwords&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;important-Ô∏è-1&quot;&gt;Important ‚ùóÔ∏è&lt;/h4&gt;
&lt;p&gt;If you do not set up this secrets in your github, you will encounter error because your code will require these secrets
everytime the code is compiling.&lt;/p&gt;

&lt;h4 id=&quot;4Ô∏è‚É£---1Ô∏è‚É£&quot;&gt;4Ô∏è‚É£ - 1Ô∏è‚É£&lt;/h4&gt;
&lt;p&gt;To set up secrets, go to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Settings&lt;/code&gt; in your project repository.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;assets/screenshots/2022/08/31/screenshot-8.png&quot; alt=&quot;screenshot-8&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;4Ô∏è‚É£---2Ô∏è‚É£&quot;&gt;4Ô∏è‚É£ - 2Ô∏è‚É£&lt;/h4&gt;
&lt;p&gt;Then click on &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Secrets&lt;/code&gt; in the left menu bar.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;assets/screenshots/2022/08/31/screenshot-9.png&quot; alt=&quot;screenshot-9&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;4Ô∏è‚É£---3Ô∏è‚É£&quot;&gt;4Ô∏è‚É£ - 3Ô∏è‚É£&lt;/h4&gt;
&lt;p&gt;Then click on &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;New repository secret&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;assets/screenshots/2022/08/31/screenshot-10.png&quot; alt=&quot;screenshot-10&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;4Ô∏è‚É£---4Ô∏è‚É£&quot;&gt;4Ô∏è‚É£ - 4Ô∏è‚É£&lt;/h4&gt;
&lt;p&gt;Finally name the secret and write the value. Then click &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Add secret&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;assets/screenshots/2022/08/31/screenshot-11.png&quot; alt=&quot;screenshot-11&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;5Ô∏è‚É£-done&quot;&gt;5Ô∏è‚É£ Done&lt;/h3&gt;
&lt;p&gt;Try pushing your work to the branch to see github actions in work.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git add .&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git commit -m &quot;[CHORE] CI pipeline configured&quot;&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git push&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;You can find the github actions in work by going to actions menu in your github repository.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;assets/screenshots/2022/08/31/screenshot-12.png&quot; alt=&quot;screenshot-12&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;Reference&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=R8_veQiYBjI&amp;amp;t=1742s&quot; target=&quot;_blank&quot;&gt;TechWorld with Nana in Youtube&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content>

      
      
      
      
      

      <author>
          <name>nogamsung</name>
        
        
      </author>

      

      
        <category term="devops" />
      

      
        <summary type="html">What is GitHub Actions GitHub Actions allows developers to automate various tasks. For example, we can build CI pipelines for Spring Boot project. In this post, I am going to go through the steps to build CI pipeline for Spring Boot.</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">AWS EC2 - Setting Up AWS EC2</title>
      <link href="/AWS_EC2-Setting_Up_AWS_EC2" rel="alternate" type="text/html" title="AWS EC2 - Setting Up AWS EC2" />
      <published>2022-08-24T14:00:00+09:00</published>
      <updated>2022-08-24T14:00:00+09:00</updated>
      <id>/AWS_EC2-Setting_Up_AWS_EC2</id>
      <content type="html" xml:base="/AWS_EC2-Setting_Up_AWS_EC2">&lt;h2 id=&quot;what-is-aws-ec2&quot;&gt;What is AWS EC2&lt;/h2&gt;
&lt;p&gt;In order to have a backend application. You need to have a server. Not everyone has a server computer in their homeüòÖ.
This is when you use AWS EC2. EC2 stands for Elastic Compute Cloud. You can borrow a server computer with a specific 
pricing that AWS provide. Basically, you can understand it as a &lt;strong&gt;rental server&lt;/strong&gt;.&lt;/p&gt;

&lt;h3 id=&quot;step-0Ô∏è‚É£&quot;&gt;Step 0Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;First you need to have an AWS account. So sign up and get free tier for your practice.&lt;/p&gt;

&lt;h4 id=&quot;tip-&quot;&gt;Tip ‚ùó&lt;/h4&gt;
&lt;p&gt;If you are not prepared with your server application. Code First! Because you want to have your free tier as long as
possible.&lt;/p&gt;

&lt;h3 id=&quot;step-1Ô∏è‚É£&quot;&gt;Step 1Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Select the region from the top navigation bar. This region should be closest to your client‚Äôs region.&lt;/p&gt;

&lt;p&gt;I am currently trying to have a service in South Korea. Therefore, I will be selecting Seoul(ap-northeast-2).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;assets/screenshots/2022/08/24/screenshot-1.png&quot; alt=&quot;screenshot-1&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;step-2Ô∏è‚É£&quot;&gt;Step 2Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Select launch instance from the EC2 Dashboard.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;assets/screenshots/2022/08/24/screenshot-2.png&quot; alt=&quot;screenshot-2&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;step-3Ô∏è‚É£&quot;&gt;Step 3Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Name your instance and choose the operating system you would like.&lt;/p&gt;

&lt;p&gt;For my specific example, I will be choosing ubuntu 22.04 as it is eligible for free tier.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;assets/screenshots/2022/08/24/screenshot-3.png&quot; alt=&quot;screenshot-3&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;step-4Ô∏è‚É£&quot;&gt;Step 4Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Select the instance type that you would like. Depending on the computing power that you need, this may vary. Of course,
if you choose a powerful instance, you would need to pay more for the usage.&lt;/p&gt;

&lt;p&gt;For my specific example, I will be selecting t2.micro which has 1vCPU, 1GiB memory. This instance is eligible for free
tier usage.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;assets/screenshots/2022/08/24/screenshot-4.png&quot; alt=&quot;screenshot-4&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;step-5Ô∏è‚É£&quot;&gt;Step 5Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Set up a key pair. This is not required, however it is important that you need to set this up for security reasons as
&lt;strong&gt;you do not want anyone else to access your ec2 instance&lt;/strong&gt;. Click on the ‚ÄúCreate new key pair‚Äù if you do not have a key
pair already.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;assets/screenshots/2022/08/24/screenshot-5.png&quot; alt=&quot;screenshot-5&quot; /&gt;&lt;/p&gt;

&lt;p&gt;After clicking on the ‚ÄúCreate new key pair‚Äù, name your key pair and select the options that you need.&lt;/p&gt;

&lt;p&gt;You should probably stick with RSA because ED25519 is not supported for Windows instance in case you are need Windows
instance.&lt;/p&gt;

&lt;p&gt;For private key file format, depending on your favor, whether it is OpenSSH or PuTTy, select the option.&lt;/p&gt;

&lt;p&gt;Finally, click Create key pair and &lt;strong&gt;keep the file somewhere secure&lt;/strong&gt;. &lt;strong&gt;If you lose this file, you will not be able to
get into your ec2 instance ever again&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;For the sake of my example, I am going to select RSA and .pem format.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;assets/screenshots/2022/08/24/screenshot-6.png&quot; alt=&quot;screenshot-6&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;step-6Ô∏è‚É£&quot;&gt;Step 6Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Next is setting up the network settings. If you have a constant IP address, and you will want to access the EC2 instance
only from the specific computer, Click on the Anywhere 0.0.0.0/0 and customize it or select ‚ÄúMy IP‚Äù which would be your
current IP address.&lt;/p&gt;

&lt;p&gt;If you are having a backend application in the EC2, you need to allow HTTPs or HTTP or both traffic from the internet.
This is your clients accessing your server for requests and responses.&lt;/p&gt;

&lt;p&gt;For my example, I am going to run a Spring Boot application, so I am going to allow HTTP traffic only. Also, I am going
to allow SSH traffic from Anywhere.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;assets/screenshots/2022/08/24/screenshot-7.png&quot; alt=&quot;screenshot-7&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;step-7Ô∏è‚É£&quot;&gt;Step 7Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Next step is setting up storage. For free tier, AWS allows you to have upto 30GB, but you probably would like to check
on the pricing to reduce surprises that you might encounter in the future.&lt;/p&gt;

&lt;p&gt;For my example, I am going to give 10GiB to my storage.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;assets/screenshots/2022/08/24/screenshot-8.png&quot; alt=&quot;screenshot-8&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;step-8Ô∏è‚É£&quot;&gt;Step 8Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;If you want your instance to have GPU or other advanced setting, you can configure it in ‚ÄúAdvanced details‚Äù.&lt;/p&gt;

&lt;p&gt;For my example, I do need any of the advanced settings for now, so I am just going to ignore this part.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;assets/screenshots/2022/08/24/screenshot-9.png&quot; alt=&quot;screenshot-9&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;step-9Ô∏è‚É£&quot;&gt;Step 9Ô∏è‚É£&lt;/h3&gt;
&lt;p&gt;Last but not least, you need to select how many instance, meaning how many server computer that you are going run.&lt;/p&gt;

&lt;p&gt;I am going to select just one for the sake of this example.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;assets/screenshots/2022/08/24/screenshot-10.png&quot; alt=&quot;screenshot-10&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Finally, click on the ‚ÄúLaunch instance‚Äù, and AWS will prepare you for your EC2 instance. Congrats! üéâ&lt;/p&gt;

&lt;h3 id=&quot;step-&quot;&gt;Step üîü&lt;/h3&gt;

&lt;p&gt;You have various ways to connect to your EC2 instance:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;EC2 Instance Connect&lt;/li&gt;
  &lt;li&gt;Session Manager&lt;/li&gt;
  &lt;li&gt;SSH client&lt;/li&gt;
  &lt;li&gt;EC2 serial console&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I usually use EC2 Instance Connect or SSH client as it is my favor of usage.&lt;/p&gt;

&lt;p&gt;And of course, as it is default to be ‚ÄúOn Demand‚Äù, you can stop your server, or get rid of it any time you would like.
However, you need to acknowledge that everytime you stop and re-run your instance, the EC2 IP address will change.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;assets/screenshots/2022/08/24/screenshot-11.png&quot; alt=&quot;screenshot-11&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;Reference&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=Pv2yDJ2NKQA&amp;amp;t=323s&quot; target=&quot;_blank&quot;&gt;ÏÉùÌôúÏΩîÎî© in Youtube&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content>

      
      
      
      
      

      <author>
          <name>nogamsung</name>
        
        
      </author>

      

      
        <category term="devops" />
      

      
        <summary type="html">What is AWS EC2 In order to have a backend application. You need to have a server. Not everyone has a server computer in their homeüòÖ. This is when you use AWS EC2. EC2 stands for Elastic Compute Cloud. You can borrow a server computer with a specific pricing that AWS provide. Basically, you can understand it as a rental server.</summary>
      

      
      
    </entry>
  
</feed>
